# 激光大冒险 - 关卡设计深度评审

## 自我批判与修正

### 原方案的问题

1. **横向激光理解有误**
   - 错误：认为横向激光只需要"部分覆盖"
   - 正确：横向激光必须**完整贯穿画布宽度**，否则玩家可以从缺口绕过

2. **难度指标不明确**
   - 原方案：笼统说"经过N道激光"
   - 需要明确：玩家必须**穿越**激光，而不是绕过

3. **激光组合逻辑混乱**
   - 横向和纵向激光的关系没有说清楚
   - 需要明确各自的作用和配合方式

---

## 修正后的核心机制

### 横向激光（水平方向）
```
←═══════激光════════→
```
- **必须完整贯穿**整个画布宽度
- **开启时**：形成一道无法穿越的墙，阻挡上下移动
- **关闭时**：该水平位置开放，玩家可以上下通过
- **游戏性**：迫使玩家在特定水平位置等待时机上下移动

### 纵向激光（垂直方向）
```
↑
║
激
光
║
↓
```
- **必须完整贯穿**整个画布高度
- **开启时**：形成一道无法穿越的墙，阻挡左右移动
- **关闭时**：该垂直位置开放，玩家可以左右通过
- **游戏性**：迫使玩家在特定垂直位置等待时机左右移动

---

## 关卡模式重新设计

### 模式A：纯横向防线（入门关卡 1-20）

**布局：**
```
起点
│
╠═══════激光1═══════╣  ← 完整横向，中间有关闭/开启
│       [通道1]      
╠═══════激光2═══════╣  ← 完整横向，中间有关闭/开启
│       [通道2]
╠═══════激光3═══════╣  ← 完整横向，中间有关闭/开启
│
终点
```

**游戏机制：**
- 玩家从起点出发，必须依次穿越激光1、激光2、激光3
- 每道激光只在**特定时间窗口**关闭
- 玩家需要在激光下方（或上方）等待，等关闭时快速穿越
- 关卡越高：激光数量越多、通道越窄、切换越快

**关键规则：**
- 激光1、2、3的关闭时间**错开**，制造连续挑战
- 玩家不能停留太久，必须在时间限制内连续穿越

---

### 模式B：纯纵向栅栏（进阶关卡 21-40）

**布局：**
```
起点 → ║ ═══激光1═══ ║ → ║ ═══激光2═══ ║ → ║ ═══激光3═══ ║ → 终点
       ↑           ↑       ↑           ↑       ↑           ↑
       通道1       通道2   通道3       通道4   通道5       通道6
```

**游戏机制：**
- 玩家从左到右前进，必须依次穿越纵向激光1、2、3
- 每道纵向激光只在特定时间关闭
- 玩家需要在激光左侧（或右侧）等待，等关闭时快速穿越

**与横向的区别：**
- 横向：控制垂直移动（上下穿越）
- 纵向：控制水平移动（左右穿越）
- 给玩家不同的操作体验

---

### 模式C：横纵组合网格（挑战关卡 41-70）

**布局：**
```
      纵向1    纵向2    纵向3
       ║        ║        ║
横向1 ═╬═══════╬═══════╬══  ← 横向完整贯穿
       ║ 交叉点 ║ 交叉点 ║
横向2 ═╬═══════╬═══════╬══  ← 横向完整贯穿
       ║ 交叉点 ║ 交叉点 ║
横向3 ═╬═══════╬═══════╬══  ← 横向完整贯穿
       ║        ║        ║
```

**游戏机制：**
- 玩家必须找到"横纵激光同时关闭"的时机
- 交叉点是最危险的位置（两道激光交汇）
- 玩家可以选择不同路线：
  - 路线1：横向1下方 → 穿越纵向1 → 横向2下方 → 穿越纵向2...
  - 路线2：纵向1右侧 → 穿越横向1 → 纵向2右侧 → 穿越横向2...

**关键设计：**
- 横纵激光的切换时间**不同步**，制造复杂时机
- 需要同时观察两个方向的激光状态

---

### 模式D：动态混合（专家关卡 71-100）

**布局：**
- 结合模式A、B、C的元素
- 激光切换速度更快
- 出现多色激光（不同伤害）
- 部分激光有"脉冲模式"（快速闪烁）

---

## 参数设计

### 横向激光参数
```javascript
numLasers = 2 + Math.floor(level / 10);  // 2-6道
yPosition = 60 + i * (H - 120) / numLasers;  // 均匀分布
gapWidth = Math.max(40, 100 - level * 0.6);  // 40-100px
switchInterval = Math.max(400, 2000 - level * 15);  // 400-2000ms
```

### 纵向激光参数
```javascript
numLasers = 2 + Math.floor((level - 20) / 10);  // 21关后开始出现
xPosition = 100 + i * (W - 200) / numLasers;
gapHeight = Math.max(50, 90 - level * 0.4);
switchInterval = Math.max(350, 1800 - level * 12);  // 比横向稍快
```

### 时间错开设计
```javascript
// 每道激光的初始延迟错开，制造连续挑战
offset = i * switchInterval / numLasers;
```

---

## 游戏性验证清单

✅ **必须满足的条件：**
1. 每道激光必须完整贯穿（横向从左到右，纵向从上到下）
2. 玩家必须经过所有激光才能到达终点
3. 不存在任何绕过激光的路径
4. 每道激光必须有明确的"关闭时间窗口"
5. 时间窗口必须足够玩家穿越（不能 impossible）
6. 不同激光的时间窗口错开，制造连续挑战

❌ **必须避免的情况：**
1. 激光有缺口可以绕过
2. 玩家可以无脑冲过去
3. 玩家找不到任何安全时机
4. 激光切换太快无法反应
5. 关卡设计导致必然死亡

---

## 实施计划

按照这个思路重新实现时：
1. 先生成纯横向防线的关卡（1-20关）
2. 测试确保玩家必须等待时机穿越
3. 再添加纯纵向栅栏（21-40关）
4. 最后实现横纵组合（41+关）

这样设计是否更合理？